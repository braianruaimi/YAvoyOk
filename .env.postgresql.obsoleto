# ========================================
# YAVOY v3.1 ENTERPRISE - PRODUCCIÓN
# ========================================
# 
# IMPORTANTE: NO SUBIR ESTE ARCHIVO A GIT
# Copiar a .env en el VPS y completar con valores reales
# 
# @version 1.0.0
# @date 21 de diciembre de 2025
# ========================================

# ============================================
# ENTORNO
# ============================================
NODE_ENV=production
PORT=3000
LOG_LEVEL=info

# ============================================
# BASE DE DATOS POSTGRESQL
# ============================================
# Hostinger VPS: Usar localhost si PostgreSQL está en el mismo servidor
DB_HOST=localhost
DB_PORT=5432
DB_NAME=yavoy_db
DB_USER=postgres
DB_PASSWORD=cesarbraian25

# Pool de conexiones (recomendado para producción)
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=5000

# ============================================
# SEGURIDAD
# ============================================
# Generar con: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=GENERAR_UN_TOKEN_SECRETO_LARGO_Y_ALEATORIO_AQUI_64_CARACTERES_MINIMO

# JWT expiration (1 día = 24h, 7 días = 168h)
JWT_EXPIRES_IN=24h

# Bcrypt rounds (10-12 recomendado en producción)
BCRYPT_ROUNDS=12

# ============================================
# CORS Y DOMINIO
# ============================================
# Dominio final de la aplicación (sin trailing slash)
# Ejemplo: https://yavoy.com,https://www.yavoy.com,https://app.yavoy.com
CORS_ORIGIN=https://TU_DOMINIO_AQUI.com,https://www.TU_DOMINIO_AQUI.com
ALLOWED_ORIGINS=https://TU_DOMINIO_AQUI.com,https://www.TU_DOMINIO_AQUI.com

# ============================================
# PASARELAS DE PAGO
# ============================================

# MercadoPago
MERCADOPAGO_PUBLIC_KEY=APP_USR-XXXXXXXX-XXXXXX-XXXXXXXX-XXXXXXXX
MERCADOPAGO_ACCESS_TOKEN=APP_USR-XXXXXXXXXXXX-XXXXXX-XXXXXXXXXXXXXXXXXXXX-XXXXXXXX
MERCADOPAGO_WEBHOOK_SECRET=tu_webhook_secret_aqui

# AstroPay
ASTROPAY_API_KEY=tu_api_key_astropay_aqui
ASTROPAY_SECRET_KEY=tu_secret_key_astropay_aqui
ASTROPAY_MERCHANT_ID=tu_merchant_id_aqui
ASTROPAY_WEBHOOK_URL=https://TU_DOMINIO_AQUI.com/api/webhooks/astropay

# ============================================
# COMISIONES Y CONFIGURACIÓN DE NEGOCIO
# ============================================
COMISION_CEO_PERCENT=15
COMISION_REPARTIDOR_PERCENT=85
TARIFA_BASE_DELIVERY=200
TARIFA_POR_KM=50

# ============================================
# EMAIL (NODEMAILER)
# ============================================
# Para notificaciones de errores críticos
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=tu_email@gmail.com
EMAIL_PASSWORD=tu_app_password_aqui
EMAIL_FROM=YAvoy <no-reply@yavoy.com>

# Email para alertas críticas (caída del servidor, errores fatales)
ADMIN_EMAIL=admin@tu_dominio.com

# ============================================
# RATE LIMITING (PROTECCIÓN DDOS)
# ============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_AUTH_MAX=5
RATE_LIMIT_CREATE_MAX=10

# ============================================
# WEBSOCKETS
# ============================================
WS_PING_TIMEOUT=60000
WS_PING_INTERVAL=25000

# ============================================
# GEOLOCALIZACIÓN
# ============================================
# Radio máximo de búsqueda de repartidores (en km)
GEOCERCA_RADIO_MAX_KM=10

# Ubicación por defecto si falla geolocalización
DEFAULT_LAT=-31.4201
DEFAULT_LNG=-64.1888
DEFAULT_CITY=Córdoba

# ============================================
# LOGS Y MONITOREO
# ============================================
# Días de retención de logs en archivos
LOG_RETENTION_DAYS=14

# Días de retención de logs en PostgreSQL
LOG_DB_RETENTION_DAYS=30

# ============================================
# NGINX REVERSE PROXY
# ============================================
# IMPORTANTE: Dejar en 1 para detectar IP real detrás de Nginx
TRUST_PROXY=1

# ============================================
# BACKUP AUTOMÁTICO
# ============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_PATH=/var/backups/yavoy

# ============================================
# SERVICIOS EXTERNOS (OPCIONAL)
# ============================================

# Google Maps API (para geocodificación y rutas)
GOOGLE_MAPS_API_KEY=tu_api_key_google_maps_aqui

# Firebase Cloud Messaging (para push notifications)
FCM_SERVER_KEY=tu_fcm_server_key_aqui
FCM_SENDER_ID=tu_sender_id_aqui

# Sentry (monitoreo de errores en producción)
SENTRY_DSN=https://xxxxx@sentry.io/xxxxx

# Push Notifications (VAPID)
VAPID_PUBLIC_KEY=tu_vapid_public_key
VAPID_PRIVATE_KEY=tu_vapid_private_key
VAPID_SUBJECT=mailto:soporte@yavoy.app

# ============================================
# NOTAS IMPORTANTES
# ============================================
# 
# 1. CAMBIAR TODOS LOS VALORES "AQUI" POR VALORES REALES
# 2. NUNCA COMPARTIR ESTE ARCHIVO EN GIT (ya está en .gitignore)
# 3. GENERAR JWT_SECRET ALEATORIO CON:
#    node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
# 4. CONFIGURAR CORS_ORIGIN CON TU DOMINIO REAL
# 5. OBTENER CREDENCIALES DE MERCADOPAGO EN https://www.mercadopago.com.ar/developers
# 6. CONFIGURAR EMAIL CON APP PASSWORD DE GMAIL (no usar password normal)
# 7. TRUST_PROXY=1 ES CRÍTICO PARA NGINX
# 
# ========================================

# CLOUDINARY (Opcional - para imágenes)
CLOUDINARY_CLOUD_NAME=tu_cloud_name
CLOUDINARY_API_KEY=tu_api_key
CLOUDINARY_API_SECRET=tu_api_secret

# EMAIL (Opcional - para notificaciones)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=notificaciones@yavoy.app
EMAIL_PASSWORD=tu_password_email
